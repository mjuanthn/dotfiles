"use strict";var v=Object.create;var m=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var N=(e,r)=>{for(var s in r)m(e,s,{get:r[s],enumerable:!0})},g=(e,r,s,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of E(r))!H.call(e,i)&&i!==s&&m(e,i,{get:()=>r[i],enumerable:!(a=w(r,i))||a.enumerable});return e};var $=(e,r,s)=>(s=e!=null?v(k(e)):{},g(r||!e||!e.__esModule?m(s,"default",{value:e,enumerable:!0}):s,e)),z=e=>g(m({},"__esModule",{value:!0}),e);var K={};N(K,{default:()=>x});module.exports=z(K);var t=require("@raycast/api"),l=require("react");var u=require("@raycast/api");var S=require("@raycast/api");var f=$(require("fs"));var y=require("@raycast/api");var R=[".","/bin","~/.bin","/usr/bin","/usr/gnu/bin","/usr/local/bin","/opt/homebrew/bin","/opt/homebrew/sbin","/usr/local/Cellar/ffmpeg"].join(":"),L=(0,y.getPreferenceValues)().ffmpeg_path??"/opt/homebrew/bin/ffmpeg";function d(e){return e.split("/").pop()}function b(e){return[...new Set(e)]}function O(e){return f.default.existsSync(e)}var F="videos-history",M=1e3*60*60*24*7;function D({timestamp:e}){return Date.now()-e<M}async function p(e){let r=e.map(s=>({file:s,timestamp:Date.now()}));return u.LocalStorage.setItem(F,JSON.stringify(r))}async function h(){let e=await u.LocalStorage.getItem(F);return!e||typeof e!="string"?null:JSON.parse(e).filter(D).map(s=>s.file).filter(O)}var n=require("react/jsx-runtime");function I(e){let[r,s]=(0,l.useState)(null),[a,i]=(0,l.useState)(e.files),[C,P]=(0,l.useState)(!0);(0,l.useEffect)(()=>{h().then(o=>{s(o||[])}).finally(()=>P(!1))},[]),(0,l.useEffect)(()=>{if(r){let o=[...e.files,...r];i(o),p(o)}},[r,e.files]);let A=o=>{p(a.filter(c=>c!==o)),i(a.filter(c=>c!==o))},_=()=>{p([]),i([])};return(0,n.jsx)(t.Grid,{isLoading:C,children:b(a).map((o,c)=>(0,n.jsx)(t.Grid.Item,{id:c.toString(),title:d(o),content:{fileIcon:o},quickLook:{path:o},accessory:c<e.files.length?{icon:{source:t.Icon.Checkmark,tintColor:"#008080"}}:void 0,actions:(0,n.jsxs)(t.ActionPanel,{children:[(0,n.jsx)(t.Action.CopyToClipboard,{content:{file:o}}),(0,n.jsx)(t.Action.ToggleQuickLook,{}),(0,n.jsx)(t.Action.Open,{title:"Open",target:o}),(0,n.jsx)(t.Action.OpenWith,{path:o}),(0,n.jsx)(t.Action,{title:"Open in Finder",onAction:()=>(0,t.showInFinder)(o),icon:{source:t.Icon.Finder}}),(0,n.jsx)(t.Action,{title:"Remove From History",style:t.Action.Style.Destructive,onAction:()=>A(o),icon:{source:t.Icon.Trash}}),(0,n.jsx)(t.Action,{title:"Clear All History",style:t.Action.Style.Destructive,onAction:_,icon:{source:t.Icon.Trash}})]})},o))})}var T=require("react/jsx-runtime");function x(){return(0,T.jsx)(I,{files:[]})}
